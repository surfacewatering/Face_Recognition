{% extends "base.html" %}
{% load static %}
{% block title %}Scan{% endblock title %}

{% block body %}
{% if prof == None %}
    <div class = "container emp-profile">
        <div class="row">
            <div class="col" style="text-align: center ;display: flex; justify-content: center; align-items: center; font-weight: bold;">
                Make sure your internet connection is well-established.<br>The camera may take a while to open based on the hardware available on your device.
            </div>
        </div><br>
        <div class="row">
            <div class="col" style="display: flex; justify-content: center; align-items: center;">
                <img style="width: 400px;" src="{% static 'images/cam.jpeg' %}">
            </div>
        </div>
    </div>
{% else %}
<div class="container emp-profile">
    <section class="section about-section gray-bg" id="about">
            <div class="container">
                <div class="row align-items-center flex-row-reverse">
                    <div class="col-lg-6">
                        <div class="about-text go-to">
                            <h3 class="dark-color">{{ prof.first_name}} {{ prof.last_name }}</h3>
                            <div class="row about-list">
                                <div class="col-md-6">
                                    <div>
                                        <label>Profession</label>
                                        <p>{{ prof.profession }}</p>
                                    </div><br>
                                    <div>
                                        <label>Rating</label>
                                        <p>{{ prof.rating }}</p>
                                    </div><br>
                                    <div>
                                        <label>Date</label>
                                        <p>{{ prof.date }}</p>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div>
                                        <label>Email</label>
                                        <p>{{ prof.email}}</p>
                                    </div><br>
                                    <div>
                                        <label>Phone</label>
                                        <p>{{ prof.phone }}</p>
                                    </div><br>
                                    <div>
                                        <label>Time of attendance:</label>
                                        <p>{{ prof.login }}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="about-avatar">
                            <img src="{{ prof.image.url }}" alt=""/>
                        </div>
                    </div>
                </div>
            </div><br>
        <div style="display: flex; align-items: center; justify-content: center">
            <a href="{% url 'main' %}"><button style="font-size: 20px; padding: 15px; padding-left: 100px; padding-right: 100px;" class="btn">RETURN</button></a>
        </div>
        </section>
</div>
{% endif %}

    <p id="pface" class="d-none">{{ pface }}</p>
    <script>
        setInterval(function () {
        var url = 'http://127.0.0.1:8000/ajax/';
        var pface = document.getElementById('pface').innerHTML;
        $.ajax({
            url: url,
            success: function (data) {
                if (data != pface) {
                    location.reload()
                }
            }
        })
    }, 3000);
</script>
{% endblock body %}